---
import Layout from "../layouts/Layout.astro";
import Garden from "../components/Garden.astro";
import SuccessButton from "../components/SuccessButton.astro";
import ProfilButton from "../components/ProfilButton.astro";
import Challenge from "../components/SidePopupChallenge.astro";
import Reward from "../components/SidePopupReward.astro";
import Profil from "../components/SidePopupProfil.astro";
---

<Layout title="Greentopia - Home">
    <div class="flexbox-content">
        <div>
        <Challenge/>
        <Reward/>
        <Garden backgroundId="garden-id" />
        <!-- <button class="big-button left-button" id="btn"></button>
        Demo-Button um zu schauen ob Garten umschalten geht -->
        <Profil/>
        <SuccessButton id="btn"/>
        <ProfilButton id="p-btn"/>
        </div>
    </div>
</Layout>

<script>

     function garden() {
        const garden = document.getElementById("garden-id");
        if (!garden) {
            return;
        }

     const btn = document.getElementById("btn");
       if (!btn) {
           return;
       }

        btn.addEventListener("click", function () {
           if (garden.className === "garden-background") {
                garden.className = "garden-background-small";
                return;
            }
            garden.className = "garden-background";
        });
    }
    garden();

/*
function main() {
        const popup = document.getElementById("popup-id");
        if (!popup) {
            return;
        }

        const btn = document.getElementById("btn");
        if (!btn) {
            return;
        }

        btn.addEventListener("click", function () {
            if (popup.className === "hidden") {
                popup.className = "popup";
                return;
            }
            popup.className = "hidden";
        });
    }
*/

document.addEventListener("DOMContentLoaded", function() {
    const btn = document.getElementById("btn");
    const reward = document.getElementById("reward-popup");

    if (btn && reward) {
        btn.addEventListener("click", function () {
            btn.className = "hidden";
            reward.classList.remove("hidden");
            reward.classList.add("visible");
        });
    }
});

document.addEventListener("DOMContentLoaded", function() {
    const profilbtn = document.getElementById("p-btn");
    const profil = document.getElementById("profil-popup");

    if (profilbtn && profil) {
        profilbtn.addEventListener("click", function () {
            profilbtn.className = "hidden";
            profil.classList.remove("hidden");
            profil.classList.add("visible");
        });
    }
});

    document.addEventListener("DOMContentLoaded", function() {
    const HeaderIcon = document.getElementById("header-icon");
    const RewardPopup = document.getElementById("reward-popup");
    const ChallengePopup = document.getElementById("challenge-popup");
    const ProfilPopup = document.getElementById("profil-popup");

    if (HeaderIcon) {
        HeaderIcon.addEventListener("click", function () {
            // Reward Popup
            if (RewardPopup && RewardPopup.classList.contains("visible")) {
                console.log('Closing RewardPopup');
                RewardPopup.classList.remove("visible");
                RewardPopup.classList.add("hidden");
            }
            // Challenge Popup
            if (ChallengePopup && ChallengePopup.classList.contains("visible")) {
                console.log('Closing ChallengePopup');
                ChallengePopup.classList.remove("visible");
                ChallengePopup.classList.add("hidden");
                RewardPopup.classList.add("visible");
            }
            // Profil Popup
            if (ProfilPopup && ProfilPopup.classList.contains("visible")) {
                console.log('Closing ProfilPopup');
                ProfilPopup.classList.remove("visible");
                ProfilPopup.classList.add("hidden");
            }
        });
    }
});
    

</script>
